The purrr package
================

- [Introduction](#introduction)
  - [Iteration](#iteration)
  - [{purrr}](#purrr)
    - [`safely()`](#safely)
  - [Session info](#session-info)

# Introduction

<https://purrr.tidyverse.org/>:

> purrr enhances R’s functional programming (FP) toolkit by providing a
> complete and consistent set of tools for working with functions and
> vectors. If you’ve never heard of FP before, the best place to start
> is the family of map() functions which allow you to replace many for
> loops with code that is both more succinct and easier to read. The
> best place to learn about the map() functions is the iteration chapter
> in R for Data Science.

See the
[cheatsheet](https://github.com/rstudio/cheatsheets/blob/main/purrr.pdf)
for a quick overview of the capabilities of {purrr}.

## Iteration

> [In this chapter](https://r4ds.hadley.nz/iteration), you’ll learn
> tools for iteration, repeatedly performing the same action on
> different objects. Iteration in R generally tends to look rather
> different from other programming languages because so much of it is
> implicit and we get it for free. For example, if you want to double a
> numeric vector x in R, you can just write 2 \* x. In most other
> languages, you’d need to explicitly double each element of x using
> some sort of for loop.

## {purrr}

### `safely()`

> Creates a modified version of .f that always succeeds. It returns a
> list with components result and error. If the function succeeds,
> result contains the returned value and error is NULL. If an error
> occurred, error is an error object and result is either NULL or
> otherwise.

``` r
x <- c(1:20, 'b')
y <- 1:20

sum_safely <- purrr::safely(sum)

res_x <- sum_safely(x)
res_y <- sum_safely(y)

str(res_x)
```

    ## List of 2
    ##  $ result: NULL
    ##  $ error :List of 2
    ##   ..$ message: chr "invalid 'type' (character) of argument"
    ##   ..$ call   : language .Primitive("sum")(..., na.rm = na.rm)
    ##   ..- attr(*, "class")= chr [1:3] "simpleError" "error" "condition"

``` r
str(res_y)
```

    ## List of 2
    ##  $ result: int 210
    ##  $ error : NULL

``` r
is.null(res_x$error)
```

    ## [1] FALSE

``` r
is.null(res_y$error)
```

    ## [1] TRUE

## Session info

This document was generated by rendering purrr.Rmd using `rmd_to_md.sh`.

    ## [1] "2025-07-28 00:09:10 UTC"

Session info.

    ## R version 4.5.0 (2025-04-11)
    ## Platform: x86_64-pc-linux-gnu
    ## Running under: Ubuntu 24.04.2 LTS
    ## 
    ## Matrix products: default
    ## BLAS:   /usr/lib/x86_64-linux-gnu/openblas-pthread/libblas.so.3 
    ## LAPACK: /usr/lib/x86_64-linux-gnu/openblas-pthread/libopenblasp-r0.3.26.so;  LAPACK version 3.12.0
    ## 
    ## locale:
    ##  [1] LC_CTYPE=en_US.UTF-8       LC_NUMERIC=C              
    ##  [3] LC_TIME=en_US.UTF-8        LC_COLLATE=en_US.UTF-8    
    ##  [5] LC_MONETARY=en_US.UTF-8    LC_MESSAGES=en_US.UTF-8   
    ##  [7] LC_PAPER=en_US.UTF-8       LC_NAME=C                 
    ##  [9] LC_ADDRESS=C               LC_TELEPHONE=C            
    ## [11] LC_MEASUREMENT=en_US.UTF-8 LC_IDENTIFICATION=C       
    ## 
    ## time zone: Etc/UTC
    ## tzcode source: system (glibc)
    ## 
    ## attached base packages:
    ## [1] stats     graphics  grDevices utils     datasets  methods   base     
    ## 
    ## other attached packages:
    ## [1] rlang_1.1.6
    ## 
    ## loaded via a namespace (and not attached):
    ##  [1] compiler_4.5.0    magrittr_2.0.3    fastmap_1.2.0     cli_3.6.5        
    ##  [5] tools_4.5.0       htmltools_0.5.8.1 yaml_2.3.10       vctrs_0.6.5      
    ##  [9] rmarkdown_2.29    knitr_1.50        xfun_0.52         digest_0.6.37    
    ## [13] lifecycle_1.0.4   evaluate_1.0.3    purrr_1.0.4
