Object-Oriented Programming in R
================

  - [Introduction](#introduction)
      - [Base types](#base-types)
          - [Numeric type](#numeric-type)
      - [Session info](#session-info)

# Introduction

Notes from the [Advanced R](https://adv-r.hadley.nz/oo.html).

Everything that exists in R is an object but this does not mean that
everything is object-oriented. In R there are **base objects** and **OO
objects** and we can use `is.object()` or `sloop::otype()` to tell which
is which.

``` r
is.object(1:10)
```

    ## [1] FALSE

``` r
sloop::otype(1:10)
```

    ## [1] "base"

``` r
is.object(mtcars)
```

    ## [1] TRUE

``` r
sloop::otype(mtcars)
```

    ## [1] "S3"

Technically, the difference between base and OO objects is that OO
objects have a “class” attribute.

``` r
attr(1:10, "class")
```

    ## NULL

``` r
attr(mtcars, "class")
```

    ## [1] "data.frame"

The `class()` function is safe to apply to S3 and S4 objects but returns
misleading results when applied to base objects. It is safer to use
`sloop::s3_class()`, which returns the implicit class that the S3 and S4
systems will use to pick methods.

``` r
x <- matrix(1:4, nrow = 2)
class(x)
```

    ## [1] "matrix" "array"

``` r
sloop::s3_class(x)
```

    ## [1] "matrix"  "integer" "numeric"

## Base types

While only OO objects have a class attribute, every object has a **base
type**.

``` r
typeof(1:10)
```

    ## [1] "integer"

``` r
typeof(mtcars)
```

    ## [1] "list"

Base types do not form an OOP system because functions that behave
differently for different base types are primarily written in C code
that uses switch statements. This means that only R-core can create new
types, and creating a new type is a lot of work because every switch
statement needs to be modified to handle a new case.

### Numeric type

R uses numeric to mean three slightly different things:

1.  In some places numeric is used as an alias for the double type.
2.  In the S3 and S4 systems, numeric is used as a shorthand for either
    integer or double type, and is used when picking methods:

<!-- end list -->

``` r
sloop::s3_class(1)
```

    ## [1] "double"  "numeric"

``` r
sloop::s3_class(1L)
```

    ## [1] "integer" "numeric"

3.  `is.numeric()` tests for objects that *behave* like numbers. For
    example, factors have type “integer” but do not behave like numbers.

<!-- end list -->

``` r
typeof(factor("x"))
```

    ## [1] "integer"

``` r
is.numeric(factor("x"))
```

    ## [1] FALSE

## Session info

This document was generated by rendering `oop.Rmd` using `rmd_to_md.sh`.

    ## [1] "2023-08-02 07:25:38 UTC"

Session info.

    ## R version 4.3.0 (2023-04-21)
    ## Platform: x86_64-pc-linux-gnu (64-bit)
    ## Running under: Ubuntu 22.04.2 LTS
    ## 
    ## Matrix products: default
    ## BLAS:   /usr/lib/x86_64-linux-gnu/openblas-pthread/libblas.so.3 
    ## LAPACK: /usr/lib/x86_64-linux-gnu/openblas-pthread/libopenblasp-r0.3.20.so;  LAPACK version 3.10.0
    ## 
    ## locale:
    ##  [1] LC_CTYPE=en_US.UTF-8       LC_NUMERIC=C              
    ##  [3] LC_TIME=en_US.UTF-8        LC_COLLATE=en_US.UTF-8    
    ##  [5] LC_MONETARY=en_US.UTF-8    LC_MESSAGES=en_US.UTF-8   
    ##  [7] LC_PAPER=en_US.UTF-8       LC_NAME=C                 
    ##  [9] LC_ADDRESS=C               LC_TELEPHONE=C            
    ## [11] LC_MEASUREMENT=en_US.UTF-8 LC_IDENTIFICATION=C       
    ## 
    ## time zone: Etc/UTC
    ## tzcode source: system (glibc)
    ## 
    ## attached base packages:
    ## [1] stats     graphics  grDevices utils     datasets  methods   base     
    ## 
    ## other attached packages:
    ## [1] sloop_1.0.1
    ## 
    ## loaded via a namespace (and not attached):
    ##  [1] compiler_4.3.0  fastmap_1.1.1   cli_3.6.1       tools_4.3.0    
    ##  [5] htmltools_0.5.5 rstudioapi_0.14 yaml_2.3.7      rmarkdown_2.22 
    ##  [9] knitr_1.43      xfun_0.39       digest_0.6.31   rlang_1.1.1    
    ## [13] evaluate_0.21
